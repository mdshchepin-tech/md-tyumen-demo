<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>–ì–æ—Å–ø–∏—Ç–∞–ª—å ¬´–ú–∞—Ç—å –∏ –¥–∏—Ç—è¬ª ‚Äî –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∏–≥—Ä–∞</title>
  <meta name="description" content="–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –º–∏–Ω–∏‚Äë–∏–≥—Ä–∞: –ø–æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –∏–Ω–Ω–æ–≤–∞—Ü–∏—è–º–∏ –≥–æ—Å–ø–∏—Ç–∞–ª—è ¬´–ú–∞—Ç—å –∏ –¥–∏—Ç—è¬ª (–¢—é–º–µ–Ω—å)."/>
  <style>
    :root{
      --bg: #ffffff;
      --bg2:#f6f6f6;
      --card:#ffffff;
      --ink:#222222;
      --muted:#666666;
      --accent:#E94E1B;
      --accent-2:#f98a60;
      --chip:#f2f2f2;
      --shadow: 0 4px 20px rgba(0,0,0,.08);
      --radius:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{ margin:0; color:var(--ink); background:var(--bg2);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; -webkit-font-smoothing: antialiased;}
    .container{max-width:1100px; margin:0 auto; padding:24px;}
    header{display:flex; align-items:center; gap:12px; padding:16px 0 8px 0}
    header .logo{width:56px; height:56px; border-radius:12px; display:grid; place-items:center; background:#fff url('https://upload.wikimedia.org/wikipedia/commons/thumb/d/d5/MD_logo.svg/512px-MD_logo.svg.png') center/contain no-repeat; box-shadow: var(--shadow)}
    header h1{font-size:22px; margin:0; color:var(--accent)}
    header small{color:var(--muted)}
    .card{background:var(--card); border:1px solid #eaeaea; border-radius:var(--radius); box-shadow: var(--shadow)}
    .hero{padding:28px; display:grid; gap:8px}
    .hero h2{margin:0; font-size:28px; color:var(--accent)}
    .hero p{margin:0; color:var(--muted)}
    .actions{display:flex; gap:12px; flex-wrap:wrap; margin-top:12px}
    button, .btn{appearance:none; border:none; color:#fff; background:linear-gradient(135deg, var(--accent), var(--accent-2)); padding:12px 18px; border-radius:14px; font-weight:600; cursor:pointer; transition:.2s transform, .2s opacity}
    button:active{transform:translateY(1px)}
    .btn.secondary{background:#f2f2f2; color:var(--ink); border:1px solid #ddd}
    .btn.ghost{background:transparent; color:var(--ink); border:1px dashed #ccc}
    .grid{display:grid; gap:16px}
    @media(min-width:740px){ .grid.cols-3{grid-template-columns: repeat(3, 1fr)} }
    @media(min-width:740px){ .grid.cols-2{grid-template-columns: repeat(2, 1fr)} }
    .zone{position:relative; padding:18px; display:grid; gap:8px; cursor:pointer; border:1px solid #eee}
    .zone h3{margin:0; font-size:18px; color:var(--accent)}
    .zone p{margin:0; color:var(--muted); font-size:14px}
    .tag{position:absolute; top:12px; right:12px; padding:4px 10px; border-radius:999px; background:var(--accent-2); color:#fff; font-size:12px}
    .badges{display:flex; gap:8px; flex-wrap:wrap}
    .badge{background:var(--accent-2); color:#fff; padding:6px 10px; border-radius:999px; font-size:12px; display:flex; align-items:center; gap:6px}
    .progress{height:10px; background:#eee; border-radius:999px; overflow:hidden; border:1px solid #ddd}
    .progress > div{height:100%; background:linear-gradient(90deg,var(--accent), var(--accent-2)); width:0%}
    .list{display:grid; gap:10px; margin-top:10px}
    .item{display:flex; gap:12px; align-items:flex-start; padding:12px; border-radius:12px; background:#fafafa; border:1px solid #eee}
    .item .meta{font-size:12px; color:var(--muted)}
    .footer{display:flex; justify-content:space-between; align-items:center; gap:12px; margin-top:16px; flex-wrap:wrap}
    .pill{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:#f9f9f9; border:1px solid #ddd; color:var(--ink); font-size:12px}
    .final{display:grid; gap:16px; padding:18px}
    form{display:grid; gap:12px}
    label{font-size:14px; color:var(--muted)}
    input, select, textarea{width:100%; padding:12px; border-radius:12px; border:1px solid #ddd; background:#fff; color:var(--ink)}
    textarea{min-height:90px}
    .toast{position:fixed; bottom:18px; left:50%; transform:translateX(-50%); padding:10px 14px; background:#333; color:#fff; border-radius:12px; display:none}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo" aria-hidden="true"></div>
      <div>
        <h1>–ì–æ—Å–ø–∏—Ç–∞–ª—å ¬´–ú–∞—Ç—å –∏ –¥–∏—Ç—è¬ª ‚Äî –¢—é–º–µ–Ω—å</h1>
        <small>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –º–∏–Ω–∏‚Äë–∏–≥—Ä–∞ –¥–ª—è –≤—Ä–∞—á–µ–π: –∏–Ω–Ω–æ–≤–∞—Ü–∏–∏, –∫–æ–º–∞–Ω–¥—ã –∏ –∫–æ–º—Ñ–æ—Ä—Ç</small>
      </div>
    </header>
    <main id="app"></main>
  </div>
  <div id="toast" class="toast" role="status" aria-live="polite"></div>
<script>
  const ZONES = { ECO: {icon:'üß¨', title:'–≠–ö–û –∏ —ç–º–±—Ä–∏–æ–ª–æ–≥–∏—è', subtitle:'–≠–º–±—Ä–∏–æ–ª–æ–≥–∏—è, —ç–º–±—Ä–∏–æ—Å–∫–æ–ø –∏ –ø–æ–≤—ã—à–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏',
    badge:{id:'innovator',label:'–ò–Ω–Ω–æ–≤–∞—Ç–æ—Ä',icon:'üß¨'}, items:[
      { id:'embryoscope', title:'–≠–º–±—Ä–∏–æ—Å–∫–æ–ø', desc:'–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ time‚Äëlapse –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ –∑–∞ —ç–º–±—Ä–∏–æ–Ω–∞–º–∏ –±–µ–∑ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏–∑ –∏–Ω–∫—É–±–∞—Ç–æ—Ä–∞.' },
      { id:'uplift', title:'–†–æ—Å—Ç –ø—Ä–æ—Ü–µ–Ω—Ç–∞ —É—Å–ø–µ—à–Ω—ã—Ö –ø–µ—Ä–µ–Ω–æ—Å–æ–≤', desc:'–ê–ª–≥–æ—Ä–∏—Ç–º—ã –æ—Ç–±–æ—Ä–∞ —ç–º–±—Ä–∏–æ–Ω–æ–≤ + —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –∫—É–ª—å—Ç–∏–≤–∞—Ü–∏–∏.' },
      { id:'team-emb', title:'–í—Å—Ç—Ä–µ—á–∞ —Å —ç–º–±—Ä–∏–æ–ª–æ–≥–æ–º', desc:'–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –≤—Ä–∞—á‚Äì–ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è, –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –∏ –∫–µ–π—Å—ã.' },] },
    GYN:{icon:'‚öïÔ∏è',title:'–ì–∏–Ω–µ–∫–æ–ª–æ–≥–∏—è',subtitle:'–ê–≤—Ç–æ—Ä—Å–∫–∏–µ –º–µ—Ç–æ–¥–∏–∫–∏ –∏ –º–µ–∂–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞—Ä–Ω–æ—Å—Ç—å',
      badge:{id:'surgeon',label:'–•–∏—Ä—É—Ä–≥‚Äë–ø—Ä–∞–∫—Ç–∏–∫',icon:'üõ†Ô∏è'}, items:[
        { id:'cerclage', title:'–õ–∞–ø–∞—Ä–æ—Å–∫–æ–ø–∏—á–µ—Å–∫–∏–π —Å–µ—Ä–∫–ª—è–∂', desc:'–ú–∏–Ω–∏‚Äë–∏–Ω–≤–∞–∑–∏–≤–Ω–æ–µ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —É–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —à–µ–π–∫–∏ –º–∞—Ç–∫–∏.' },
        { id:'myomectomy', title:'–ú–∏–æ–º—ç–∫—Ç–æ–º–∏—è –ø–æ –°—Ç—Ä–∞–∂–Ω–∏–∫–æ–≤—É (–ø–∞—Ç–µ–Ω—Ç)', desc:'–û—Ä–≥–∞–Ω–æ—Å–æ—Ö—Ä–∞–Ω—è—é—â–∞—è —Ç–µ—Ö–Ω–∏–∫–∞: –∫–æ–Ω—Ç—Ä–æ–ª—å –∫—Ä–æ–≤–æ–ø–æ—Ç–µ—Ä–∏, —Ç–æ—á–Ω–∞—è —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è.' },
        { id:'endometriosis', title:'–†–∞–¥–∏–∫–∞–ª—å–Ω–∞—è —Ö–∏—Ä—É—Ä–≥–∏—è —ç–Ω–¥–æ–º–µ—Ç—Ä–∏–æ–∑–∞', desc:'–ü–æ–ª–Ω—ã–π –æ–±—ä—ë–º —Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∞–Ω–∞—Ç–æ–º–∏–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏.' },
        { id:'team', title:'–ö–æ–º–∞–Ω–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥', desc:'–ì–∏–Ω–µ–∫–æ–ª–æ–≥–∏, —É—Ä–æ–ª–æ–≥–∏, –æ–Ω–∫–æ–ª–æ–≥–∏, —Ö–∏—Ä—É—Ä–≥–∏ ‚Äî –∫–æ–Ω—Å–∏–ª–∏—É–º –ø–æ –ø–æ–∫–∞–∑–∞–Ω–∏—è–º.' },
        { id:'prolapse', title:'–•–∏—Ä—É—Ä–≥–∏—è –ø—Ä–æ–ª–∞–ø—Å–æ–≤', desc:'–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ‚Äë—Å–æ—Ö—Ä–∞–Ω—è—é—â–∏–µ –º–µ—Ç–æ–¥—ã, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ—Ç—á–∞—Ç—ã–µ –∏–º–ø–ª–∞–Ω—Ç—ã –ø—Ä–∏ –ø–æ–∫–∞–∑–∞–Ω–∏—è—Ö.' },]},
    OBST:{icon:'ü§∞',title:'–ê–∫—É—à–µ—Ä—Å—Ç–≤–æ',subtitle:'–ò–Ω–Ω–æ–≤–∞—Ü–∏–∏ –≤ —Ä–æ–¥–æ–≤—Å–ø–æ–º–æ–∂–µ–Ω–∏–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ',
      badge:{id:'ob-novator',label:'–ê–∫—É—à–µ—Ä‚Äë–Ω–æ–≤–∞—Ç–æ—Ä',icon:'ü§∞'}, items:[
        { id:'uae', title:'–≠–º–±–æ–ª–∏–∑–∞—Ü–∏—è –º–∞—Ç–æ—á–Ω—ã—Ö –∞—Ä—Ç–µ—Ä–∏–π (–ì–ú–ö)', desc:'–≠–Ω–¥–æ–≤–∞—Å–∫—É–ª—è—Ä–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥–∏–ø–æ—Ç–æ–Ω–∏—á–µ—Å–∫–æ–≥–æ –º–∞—Ç–æ—á–Ω–æ–≥–æ –∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏—è.' },
        { id:'balloon', title:'–ë–∞–ª–ª–æ–Ω–Ω–∞—è –æ–∫–∫–ª—é–∑–∏—è –ø—Ä–∏ –≤—Ä–∞—Å—Ç–∞–Ω–∏–∏ –ø–ª–∞—Ü–µ–Ω—Ç—ã', desc:'–í—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫–∫–ª—é–∑–∏—è –ø–æ–¥–≤–∑–¥–æ—à–Ω—ã—Ö –∞—Ä—Ç–µ—Ä–∏–π ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å –∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏—è.' },
        { id:'remote', title:'–î–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–ö–¢–ì/–≥–ª—é–∫–æ–∑–∞)', desc:'–£–¥–∞–ª—ë–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –±–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø—ã —Ä–∏—Å–∫–∞: –ö–¢–ì –∏ CGM‚Äë—Å–∏—Å—Ç–µ–º—ã.' },
        { id:'mdt', title:'–ú–µ–∂–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞—Ä–Ω–æ–µ –≤–µ–¥–µ–Ω–∏–µ', desc:'–û—Ç–¥–µ–ª–µ–Ω–∏–µ –ø–∞—Ç–æ–ª–æ–≥–∏–∏ –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏, —Å–æ–≤–º–µ—Å—Ç–Ω—ã–µ –æ–±—Ö–æ–¥—ã –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–∫—Ç–∏–∫–∏.' },
        { id:'continuity', title:'–ü—Ä–µ–µ–º—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å', desc:'–ï–¥–∏–Ω–∞—è –ª–∏–Ω–∏—è –≤–µ–¥–µ–Ω–∏—è –æ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –¥–æ –ø–æ—Å–ª–µ—Ä–æ–¥–æ–≤–æ–≥–æ —ç—Ç–∞–ø–∞.' },]},
    NEO:{icon:'üë∂',title:'–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –¥–µ—Ç—Å–∫–∞—è —Ä–µ–∞–Ω–∏–º–∞—Ü–∏—è',subtitle:'–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Å–∞–º—ã–º —Å–ª–æ–∂–Ω—ã–º —Å–ª—É—á–∞—è–º',
      badge:{id:'neoprotector',label:'–ó–∞—â–∏—Ç–Ω–∏–∫ –Ω–æ–≤–æ—Ä–æ–∂–¥—ë–Ω–Ω—ã—Ö',icon:'ü´∂'}, items:[
        { id:'equipment', title:'–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ', desc:'–ò–Ω–∫—É–±–∞—Ç–æ—Ä—ã, –ò–í–õ, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, —Ç–µ—Ä–º–æ—Ä–µ–≥—É–ª—è—Ü–∏—è, CPAP.' },
        { id:'stories', title:'–ò—Å—Ç–æ—Ä–∏–∏ —Å–ø–∞—Å—ë–Ω–Ω—ã—Ö –¥–µ—Ç–µ–π', desc:'–ö–æ—Ä–æ—Ç–∫–∏–µ –∫–µ–π—Å—ã –æ –º–µ–∂–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–µ.' },]},
    ROOM:{icon:'üõè',title:'–ö–æ–º—Ñ–æ—Ä—Ç–Ω—ã–µ –æ–¥–Ω–æ–º–µ—Å—Ç–Ω—ã–µ –ø–∞–ª–∞—Ç—ã',subtitle:'–ö–æ–º—Ñ–æ—Ä—Ç –∏ —Å–µ—Ä–≤–∏—Å –¥–ª—è —Å–µ–º—å–∏',
      badge:{id:'service',label:'–°–µ—Ä–≤–∏—Å –¥–ª—è –ø–∞—Ü–∏–µ–Ω—Ç–∞',icon:'‚ú®'}, items:[
        { id:'tour', title:'–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—É–ª–∫–∞ –ø–æ –ø–∞–ª–∞—Ç–µ', desc:'–ï–¥–∏–Ω–∏—á–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ, –∑–æ–Ω–∞ –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞, –ø–∏—Ç–∞–Ω–∏–µ.' },
        { id:'family', title:'–°–µ—Ä–≤–∏—Å –¥–ª—è —Å–µ–º—å–∏', desc:'–õ–∞–∫—Ç–∞—Ü–∏—è, –ø—Å–∏—Ö–æ–ª–æ–≥, –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ —É—Ö–æ–¥—É.' },]},
    CONS:{icon:'üë©‚Äç‚öïÔ∏è',title:'–ö–æ–Ω—Å–∏–ª–∏—É–º –∑–∞ –º–∏–Ω—É—Ç—É',subtitle:'–ú–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω–æ–µ –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π',
      badge:{id:'teamplayer',label:'–ö–æ–º–∞–Ω–¥–Ω—ã–π –∏–≥—Ä–æ–∫',icon:'ü§ù'}, items:[
        { id:'chief', title:'–í—ã–∑–≤–∞—Ç—å –≥–ª–∞–≤–Ω–æ–≥–æ –≤—Ä–∞—á–∞', desc:'–†–µ—à–µ–Ω–∏–µ –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏ ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è.' },
        { id:'onco', title:'–ü–æ–¥–∫–ª—é—á–∏—Ç—å –æ–Ω–∫–æ–ª–æ–≥–∞', desc:'–û—Ü–µ–Ω–∫–∞ –æ–Ω–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Ä–∏—Å–∫–æ–≤ –∏ —Ç–∞–∫—Ç–∏–∫–∏.' },
        { id:'uro', title:'–í—ã–∑–≤–∞—Ç—å —É—Ä–æ–ª–æ–≥–∞', desc:'–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Å–æ–≤–º–µ—Å—Ç–Ω—ã–º –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞–º.' },
        { id:'all', title:'–°–æ–∑–≤–∞—Ç—å –≤—Å–µ—Ö', desc:'–ü–æ–ª–Ω—ã–π —Å–æ—Å—Ç–∞–≤ –∫–æ–Ω—Å–∏–ª–∏—É–º–∞: —Ä–µ—à–µ–Ω–∏–µ –∑–∞ –º–∏–Ω—É—Ç—É.' },],
      scenario:{ title:'–°–∏–º—É–ª—è—Ü–∏—è: –≤—Ä–∞—Å—Ç–∞–Ω–∏–µ –ø–ª–∞—Ü–µ–Ω—Ç—ã', text:'–ü–∞—Ü–∏–µ–Ω—Ç–∫–∞ —Å –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–µ–º –Ω–∞ PAS. –ö–∞–∫ –¥–µ–π—Å—Ç–≤—É–µ–º?',
        winChoice:'all', winText:'–ö–æ–Ω—Å–∏–ª–∏—É–º —Å–æ–±—Ä–∞–Ω, –ø–ª–∞–Ω –≥–æ—Ç–æ–≤: —Ä–æ–¥–æ—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ, –±–∞–ª–ª–æ–Ω–Ω–∞—è –æ–∫–∫–ª—é–∑–∏—è, –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –Ω–µ–æ–Ω–∞—Ç–æ–ª–æ–≥–æ–≤.' } }
  };
  const state = { visited:new Set(JSON.parse(localStorage.getItem('visited')||'[]')),
                  selections:JSON.parse(localStorage.getItem('selections')||'{}'),
                  badges:new Set(JSON.parse(localStorage.getItem('badges')||'[]')),
                  screen:'intro'};
  function persist(){ localStorage.setItem('visited', JSON.stringify([...state.visited]));
    localStorage.setItem('selections', JSON.stringify(state.selections));
    localStorage.setItem('badges', JSON.stringify([...state.badges])); }
  const el = s=>document.querySelector(s);
  const toast = m=>{ const t=el('#toast'); t.textContent=m; t.style.display='block'; setTimeout(()=>t.style.display='none',2200)};
  function awardBadge(k){ const b=ZONES[k].badge; if(!b) return; const before=state.badges.size; state.badges.add(b.id); persist(); if(state.badges.size>before) toast(`–ü–æ–ª—É—á–µ–Ω –±–µ–π–¥–∂: ${b.icon} ${b.label}`); }
  function pct(a,b){ return Math.round((a/b)*100) }
  const app=document.getElementById('app');
  function NavBar(extraRight){ const visited=state.visited.size; const total=Object.keys(ZONES).length;
    return `<div class="footer">
      <div class="pill"><span>üìç –ò–∑—É—á–µ–Ω–æ –∑–æ–Ω:</span> <strong>${visited}/${total}</strong></div>
      <div class="progress" style="flex:1; max-width:420px"><div style="width:${pct(visited,total)}%"></div></div>
      <div class="badges">${[...state.badges].map(id=>{ const z=Object.values(ZONES).find(z=>z.badge?.id===id); return `<span class="badge">${z.badge.icon} ${z.badge.label}</span>` }).join('')||'<span class="badge">üéØ –û—Ç–∫—Ä–æ–π—Ç–µ –∑–æ–Ω—ã ‚Äî –ø–æ–ª—É—á–∏—Ç–µ –±–µ–π–¥–∂–∏</span>'}</div>
      ${extraRight||''}
    </div>` }
  function renderIntro(){ state.screen='intro'; app.innerHTML=`
    <section class="card hero"><h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2><p>–í—ã –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∏–≥—Ä–µ –≥–æ—Å–ø–∏—Ç–∞–ª—è ¬´–ú–∞—Ç—å –∏ –¥–∏—Ç—è¬ª (–¢—é–º–µ–Ω—å). –ù–∞—á–Ω—ë–º?</p>
    <div class="actions"><button id="start">–ù–∞—á–∞—Ç—å –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ</button><button class="btn secondary" id="skip">–°—Ä–∞–∑—É –∫ –∫–∞—Ä—Ç–µ</button></div></section>`;
    el('#start').onclick=()=>renderMap(); el('#skip').onclick=()=>renderMap(); }
  function renderMap(){ state.screen='map';
    const zones=Object.entries(ZONES).map(([k,z])=>{ const v=state.visited.has(k);
      return `<article class="card zone" data-zone="${k}" tabindex="0" role="button"><span class="tag">${v?'–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ':'–ù–æ–≤–∞—è –∑–æ–Ω–∞'}</span><h3>${z.icon} ${z.title}</h3><p>${z.subtitle}</p></article>` }).join('');
    const canFinish=state.visited.size>=3;
    app.innerHTML=`<section class="card hero"><h2>–ö–∞—Ä—Ç–∞ –≥–æ—Å–ø–∏—Ç–∞–ª—è</h2><p>–í—ã–±–µ—Ä–∏—Ç–µ –∑–æ–Ω—ã. –ü–æ—Å–ª–µ ‚â•3 –∑–æ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω —Ñ–∏–Ω–∞–ª.</p>${NavBar(`<button class="btn ${canFinish?'':'ghost'}" id="finish" ${canFinish?'':'disabled'}>–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ñ–∏–Ω–∞–ª—É</button>`)}</section><section class="grid cols-3" style="margin-top:16px">${zones}</section>`;
    document.querySelectorAll('[data-zone]').forEach(c=>{ c.onclick=()=>renderZone(c.getAttribute('data-zone')); c.onkeydown=e=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); renderZone(c.getAttribute('data-zone')) } } });
    const f=el('#finish'); if(f) f.onclick=()=>renderFinal(); }
  function renderZone(k){ const z=ZONES[k]; state.visited.add(k); awardBadge(k); persist();
    const selected=new Set(state.selections[k]||[]);
    const items=z.items.map(i=>{ const ch=selected.has(i.id)?'checked':'';
      return `<label class="item"><input type="checkbox" data-item="${i.id}" ${ch} /><div><div><strong>${i.title}</strong></div><div class="meta">${i.desc}</div></div></label>` }).join('');
    const scenario=z.scenario?`<div class="card" style="padding:16px; margin-top:12px"><div style="display:flex; align-items:center; gap:10px; margin-bottom:8px"><div class="pill">üß© –°–∏–º—É–ª—è—Ü–∏—è</div><strong>${z.scenario.title}</strong></div><p style="margin:6px 0 12px 0; color:#666">${z.scenario.text}</p><div class="actions">${z.items.map(i=>`<button class="btn secondary" data-sim="${i.id}">${i.title}</button>`).join('')}</div><div id="sim-result" style="margin-top:10px; color:#333"></div></div>`:'';
    app.innerHTML=`<section class="card hero"><h2>${z.icon} ${z.title}</h2><p>${z.subtitle}</p>${NavBar(`<button class="btn" id="back">–ù–∞–∑–∞–¥ –∫ –∫–∞—Ä—Ç–µ</button>`)}</section><section class="card" style="padding:18px; margin-top:16px"><h3 style="margin-top:0">–í—ã–±–µ—Ä–∏—Ç–µ, —á—Ç–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å</h3><div class="list">${items}</div></section>${scenario}`;
    el('#back').onclick=()=>renderMap();
    document.querySelectorAll('input[data-item]').forEach(chk=>{ chk.onchange=()=>{ const id=chk.getAttribute('data-item'); const list=new Set(state.selections[k]||[]); if(chk.checked) list.add(id); else list.delete(id); state.selections[k]=[...list]; persist(); }});
    if(z.scenario){ document.querySelectorAll('[data-sim]').forEach(b=>{ b.onclick=()=>{ const choice=b.getAttribute('data-sim'); const win=(choice===z.scenario.winChoice);
      el('#sim-result').innerHTML = win ? `<div class="pill" style="background:#eaf8f0; border-color:#bfe7cd">‚úÖ ${z.scenario.winText}</div>` : `<div class="pill" style="background:#fff3f3; border-color:#f1c0c0">‚ö†Ô∏è –†–∏—Å–∫ –∑–∞–¥–µ—Ä–∂–∫–∏ —Ä–µ—à–µ–Ω–∏—è. –°–æ–±–µ—Ä–∏—Ç–µ –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Å–∏–ª–∏—É–º.</div>`; }; }); }
  }
  function renderFinal(){ state.screen='final';
    const picked=Object.entries(state.selections).flatMap(([k,arr])=>arr.map(id=>({zone:k,id})));
    const badgeEls=[...state.badges].map(id=>{ const z=Object.values(ZONES).find(z=>z.badge?.id===id); return `<span class="badge">${z.badge.icon} ${z.badge.label}</span>` }).join('');
    app.innerHTML=`<section class="card hero"><h2>–§–∏–Ω–∞–ª ‚Äî –≤–∞—à –ø—Ä–æ—Ñ–∏–ª—å</h2><p>–û—Ç–ª–∏—á–Ω–æ! –í—ã –∏–∑—É—á–∏–ª–∏ <strong>${state.visited.size}</strong> –∑–æ–Ω(—ã). –ù–∏–∂–µ ‚Äî –ø—Ä–æ—Ñ–∏–ª—å –∏ —Ñ–æ—Ä–º–∞ –¥–ª—è —Å–≤—è–∑–∏.</p>${NavBar(`<button class="btn secondary" id="reset">–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>`)}</section>
      <section class="card final"><div><strong>–í–∞—à–∏ –±–µ–π–¥–∂–∏:</strong></div><div class="badges">${badgeEls||'<span class="badge">–ü–æ–∫–∞ –±–µ–∑ –±–µ–π–¥–∂–µ–π</span>'}</div>
      <div style="margin-top:10px"><div><strong>–ò–Ω—Ç–µ—Ä–µ—Å—ã (–≤—ã–±–æ—Ä—ã):</strong></div><ul>${picked.length?picked.map(p=>{ const z=ZONES[p.zone]; const it=z.items.find(i=>i.id===p.id); return `<li>${z.icon} <strong>${z.title}</strong> ‚Äî ${it.title}</li>` }).join(''):'<li>–í—ã –º–æ–∂–µ—Ç–µ –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –∫–∞—Ä—Ç—É –∏ –≤—ã–±—Ä–∞—Ç—å —Ç–µ–º—ã.</li>'}</ul></div></section>
      <section class="card final"><h3 style="margin:0">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–æ–º–∞–Ω–¥–µ</h3><p class="meta">–û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã ‚Äî –º—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏. (–î–µ–º–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç JSON‚Äë—Ñ–∞–π–ª.)</p>
      <form id="applyForm"><div><label for="name">–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è</label><input id="name" name="name" required placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤" /></div>
      <div class="grid cols-2"><div><label for="spec">–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</label><select id="spec" name="spec" required><option value="">–í—ã–±–µ—Ä–∏—Ç–µ‚Ä¶</option><option>–ê–∫—É—à–µ—Ä‚Äë–≥–∏–Ω–µ–∫–æ–ª–æ–≥</option><option>–≠–º–±—Ä–∏–æ–ª–æ–≥</option><option>–•–∏—Ä—É—Ä–≥</option><option>–£—Ä–æ–ª–æ–≥</option><option>–û–Ω–∫–æ–ª–æ–≥</option><option>–ê–Ω–µ—Å—Ç–µ–∑–∏–æ–ª–æ–≥‚Äë—Ä–µ–∞–Ω–∏–º–∞—Ç–æ–ª–æ–≥ (–Ω–µ–æ–Ω–∞—Ç–æ–ª–æ–≥–∏—è)</option><option>–î—Ä—É–≥–æ–µ</option></select></div>
      <div><label for="contact">E‚Äëmail –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω</label><input id="contact" name="contact" required placeholder="name@example.com / +7‚Äë900‚Äë..." /></div></div>
      <div><label for="dept">–ò–Ω—Ç–µ—Ä–µ—Å—É—é—â–µ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</label><input id="dept" name="dept" placeholder="–≠–ö–û / –≥–∏–Ω–µ–∫–æ–ª–æ–≥–∏—è / –∞–∫—É—à–µ—Ä—Å—Ç–≤–æ / –Ω–µ–æ–Ω–∞—Ç–æ–ª–æ–≥–∏—è‚Ä¶" /></div>
      <div><label for="msg">–ö–æ—Ä–æ—Ç–∫–æ –æ —Å–µ–±–µ</label><textarea id="msg" name="msg" placeholder="–û–ø—ã—Ç, –∏–Ω—Ç–µ—Ä–µ—Å –∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º, –æ–∂–∏–¥–∞–Ω–∏—è"></textarea></div>
      <div class="actions"><button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É (–¥–µ–º–æ)</button><a class="btn secondary" id="copySummary" href="#">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a></div></form></section>`;
    el('#reset').onclick=()=>{ localStorage.clear(); state.visited.clear(); state.badges.clear(); state.selections={}; toast('–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–±—Ä–æ—à–µ–Ω'); renderIntro(); };
    el('#copySummary').onclick=(e)=>{ e.preventDefault(); const t=buildSummaryText(); navigator.clipboard.writeText(t).then(()=>toast('–ü—Ä–æ—Ñ–∏–ª—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω')); };
    el('#applyForm').onsubmit=(e)=>{ e.preventDefault(); const form=new FormData(e.target); const payload=Object.fromEntries(form.entries()); payload.badges=[...state.badges]; payload.selections=state.selections; const blob=new Blob([JSON.stringify(payload,null,2)],{type:'application/json'}); const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='application_demo.json'; a.click(); URL.revokeObjectURL(url); toast('–§–∞–π–ª –∑–∞—è–≤–∫–∏ —Å–æ—Ö—Ä–∞–Ω—ë–Ω'); };
  }
  function buildSummaryText(){ const badges=[...state.badges].map(id=>{ const z=Object.values(ZONES).find(z=>z.badge?.id===id); return `${z.badge.icon} ${z.badge.label}` }).join(', ');
    const picks=Object.entries(state.selections).flatMap(([k,arr])=>arr.map(id=>{ const z=ZONES[k]; const it=z.items.find(i=>i.id===id); return `${z.title} ‚Äî ${it.title}` }));
    return `–ü—Ä–æ—Ñ–∏–ª—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ (–¥–µ–º–æ)\n–ó–æ–Ω—ã –∏–∑—É—á–µ–Ω—ã: ${state.visited.size}\n–ë–µ–π–¥–∂–∏: ${badges||'‚Äî'}\n–ò–Ω—Ç–µ—Ä–µ—Å—ã: ${picks.join('; ')||'‚Äî'}`; }
  function routeFromHash(){ const h=location.hash.replace('#',''); if(h.startsWith('zone/')){ renderZone(h.split('/')[1]); return } if(h==='map'){ renderMap(); return } if(h==='final'){ renderFinal(); return } renderIntro(); }
  window.addEventListener('hashchange', routeFromHash); routeFromHash();
</script>
</body>
</html>